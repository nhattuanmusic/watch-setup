<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ESP32 Watch WiFi Setup</title>
<style>
body { font-family: Arial; text-align: center; padding: 30px; }
input, button { font-size: 18px; padding: 10px; margin: 8px; width: 250px; }
button { background:#2196F3; color:white; border:none; border-radius:6px; }
</style>
</head>
<body>

<h2>Connect Your Watch to WiFi</h2>

<input id="ssid" placeholder="WiFi Name"><br>
<input id="pass" placeholder="WiFi Password" type="password"><br>
<button onclick="connect()">Connect Watch</button>

<p id="status"></p>

<script>
const SERVICE_UUID = "6e400001-b5a3-f393-e0a9-e50e24dcca9e";
const CHAR_UUID    = "6e400002-b5a3-f393-e0a9-e50e24dcca9e";

async function connect() {
  try {
    status.innerText = "Scanning for watch...";

    const device = await navigator.bluetooth.requestDevice({
      filters: [{ namePrefix: "ESP32_Clock" }],
      optionalServices: [SERVICE_UUID]
    });

    const server = await device.gatt.connect();
    const service = await server.getPrimaryService(SERVICE_UUID);
    const char = await service.getCharacteristic(CHAR_UUID);

    let ssid = document.getElementById("ssid").value;
    let pass = document.getElementById("pass").value;

    await char.writeValue(new TextEncoder().encode("WIFI:" + ssid));
    await new Promise(r => setTimeout(r, 300));
    await char.writeValue(new TextEncoder().encode("PASS:" + pass));

    status.innerText = "WiFi info sent! Watch connecting...";
  }
  catch(e){
    status.innerText = "Error: " + e;
  }
}
</script>

</body>
</html>
